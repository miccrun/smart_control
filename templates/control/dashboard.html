<%inherit file="/layouts/base.html" />

<%def name="css_files()">
${ parent.css_files() }
## <link href="/static/css/index.css" rel="stylesheet">
</%def>

<%def name="title()">Smart Control Dashboard</%def>
<%def name="js_defer()">
${ parent.js_defer() }
<script type="text/javascript">
  % for device in appliances:
    % for operation in device.operations.all():
      $("#${device.id}${operation.codename}").click(function(){
        $.post("/operate/${device.id}/${operation.codename}");
      });
    % endfor
  % endfor

  $("#sleep_mode_on").click(function(){
      $.post("/config", {"sleep_mode": "1"});
  });
  $("#sleep_mode_off").click(function(){
      $.post("/config", {"sleep_mode": "0"});
  });
</script>

</%def>

% for room in rooms:
<div>
  <legend>${room.name}</legend>
  % for device in room.devices.filter(type=1):
  <div class="col-lg-6">
    <h4>${device.name}</h4>
    <div class="btn-group btn-group-justified">
      % for operation in device.operations.all():
      <div class="btn-group">
        <button id="${device.id}${operation.codename}" type="button" class="btn btn-default btn-lg">${operation.name}</button>
      </div>
      % endfor
    </div>
  </div>
  % endfor
</div>
% endfor

<div>
  <legend>Config</legend>
  <div class="col-lg-6">
    <h4>Sleep Mode</h4>
    <div class="btn-group btn-group-justified">
      <div class="btn-group">
        <button id="sleep_mode_on" type="button" class="btn btn-default btn-lg">On</button>
      </div>
      <div class="btn-group">
        <button id="sleep_mode_off" type="button" class="btn btn-default btn-lg">Off</button>
      </div>
    </div>
  </div>
</div>
